<main class=" container-fluid my-5 ">
    <div class="row ">

        <div class="col d-flex mb-5">
                <!-- Colonne de gauche : Mes animaux -->
                <div class="row flex-grow-1 mb-5 ">
                    <h3 class="border-bottom w-50">Mes animaux</h3>
                    <div class="flex-grow-1 h-100 bg-primary rounded-2 shadow-sm p-4 row d-flex flex-column position-relative">

                            <!-- Affichage compagnon -->
                        <div class="d-flex mb-5" *ngFor="let animal of animals">
                          <div class="bg-white shadow-sm mx-2 square rounded-2">
                            <img [src]="animal.picture" alt="Image de l'animal" class="w-100 h-100 rounded-2 object-fit-cover">
                          </div>

                          <div class="bg-white flex-grow-1 rounded-2 shadow-sm d-flex px-4 align-items-center justify-content-between col">
                            <div class="d-flex flex-column justify-content-center gap-2">
                              <h5 class="m-0">{{ animal.name }}</h5>
                              <p class="m-0 text-gray-custom">{{ animal.race }}</p>
                            </div>
                            <button class="btn bouton-voir-plus" (click)="showAnimalDetails(animal)">Détails</button>
                          </div>
                        </div>
                            <button class="btn bouton-voir-plus m-auto mb-4 bouton-ajouter-compagnon position-absolute bottom-0" (click)="clearInputsAndEnable()">Ajouter un compagnon</button>
                        </div>
                    </div>
        </div>

        <!-- Colonne de droite : fiche détaillée -->
        <div class="col w-50 h-100 ms-5" *ngIf="selectedAnimal">
            <h3 class="border-bottom w-50">Fiche détaillée</h3>
            <div class="row h-75 mb-5 bg-primary rounded-2 shadow-sm">
                <div class="bg-primary h-100 w-100 rounded-2 p-4 ">

                  <!--------------------------------- FORM --------------------------------->
                  <form [formGroup]="checkoutForm" (ngSubmit)="onSubmit()">
                    <div class="d-flex flex-column gap-4">

                        <div class="d-flex flex-row">
                            <div class="bg-white shadow-sm mx-2 big-square rounded-2">
                              <img [src]="selectedAnimal?.picture ? selectedAnimal.picture : '../assets/images/patte.png'" alt="Image de l'animal" class="w-100 h-100 rounded-2 object-fit-cover">

                            </div>
                            <div
                                class="bg-white flex-grow-1 rounded-2 shadow-sm p-4 align-items-center justify-content-between col">
                                <div class="d-flex flex-column justify-content-center gap-3">

                                  <div class="row align-items-center">
                                    <label for="name" class="col-sm-4 col-form-label fw-semibold text-black text-nowrap">Nom:</label>
                                    <div class="col-sm-8 ">
                                      <input type="text" id="name" class="form-control" placeholder="" formControlName="name" [value]="selectedAnimal?.name"
                                             [disabled]="!isAddingAnimal">
                                    </div>
                                  </div>

                                  <div class="row align-items-center">
                                    <label for="race" class="col-sm-4 col-form-label fw-semibold text-black text-nowrap">Race:</label>
                                    <div class="col-sm-8">
                                      <input type="text" id="race" class="form-control" placeholder="" formControlName="race" [value]="selectedAnimal?.race"
                                             [disabled]="!isAddingAnimal">
                                    </div>
                                  </div>

                                  <div class="row align-items-center">
                                    <label for="gender" class="col-sm-4 col-form-label fw-semibold text-black text-nowrap">Sexe:</label>
                                    <div class="col-sm-8">
                                      <select id="gender" class="form-select" formControlName="gender" [value]="selectedAnimal.gender" [disabled]="!isAddingAnimal" >
                                        <option value="" disabled selected>Veuillez sélectionner le sexe</option>
                                        <option value="Male">Mâle</option>
                                        <option value="Female">Femelle</option>
                                      </select>
                                    </div>
                                  </div>

                                  <div class="row align-items-center">
                                    <label for="birthday"
                                           class="col-sm-4 col-form-label fw-semibold text-black text-nowrap">Date de naissance:</label>
                                    <div class="col-sm-8">
                                      <input type="date" id="birthday" class="form-control" placeholder="" formControlName="birthday" [value]="selectedAnimal?.birthday"
                                             [disabled]="!isAddingAnimal">
                                    </div>
                                  </div>

                                  <div class="row align-items-center">
                                    <label for="age"
                                           class="col-sm-4 col-form-label fw-semibold text-black text-nowrap">Age:</label>
                                    <div class="col-sm-8">
                                      <input type="text" id="age" class="form-control" placeholder="" [value]="calculateAge(selectedAnimal?.birthday)"
                                             disabled>
                                    </div>
                                  </div>

                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-2 shadow-sm p-4">
                            <div class="d-flex flex-column justify-content-center gap-3">
                                <h5 class="m-0 text-center pb-2 m-2">Fiche santé</h5>
                                <div class="d-flex flex-row justify-content-between">
                                    <div class="d-flex flex-column gap-3">


                                        <div class="row align-items-center">
                                            <label for="weight"
                                                class="col-sm-4 col-form-label fw-semibold text-black text-nowrap">Poids:</label>
                                            <div class="col-sm-8">
                                                <input type="text" id="weight" class="form-control" placeholder="" formControlName="weight" [value]="selectedAnimal?.weight"
                                                       [disabled]="!isAddingAnimal">
                                            </div>
                                        </div>



                                        <div class="row align-items-center">
                                            <label for="size"
                                                class="col-sm-4 col-form-label fw-semibold text-black text-nowrap">Taille:</label>
                                            <div class="col-sm-8">
                                                <input type="text" id="size" class="form-control" placeholder="" formControlName="size" [value]="selectedAnimal?.height"
                                                       [disabled]="!isAddingAnimal">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-flex flex-column gap-3">


                                        <div class="row align-items-center">
                                            <label for="healthCondition"
                                                class="col-sm-4 col-form-label fw-semibold text-black text-nowrap">Condition:
                                            </label>
                                            <div class="col-sm-8">
                                                <input type="text" id="healthCondition" class="form-control"
                                                    placeholder="" formControlName="healthCondition" [value]="selectedAnimal?.healthCondition" [disabled]="!isAddingAnimal">
                                            </div>
                                        </div>

                                        <div class="row align-items-center">

                                            <label for="lastVisit"
                                                class="col-sm-4 col-form-label fw-semibold text-black text-nowrap">Dernière
                                                visite: </label>
                                            <div class="col-sm-8">
                                                <input type="date" id="lastVisit" class="form-control" placeholder="" formControlName="lastVisit" [value]="selectedAnimal?.lastVisit"
                                                       [disabled]="!isAddingAnimal">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                              <label for="notes"
                                     class="col-sm-4 col-form-label fw-semibold text-black text-nowrap">Notes: </label>
                                <textarea class="form-control bg-light fixed-size-textarea" rows="5" formControlName="notes" [value]="selectedAnimal?.notes" [disabled]="!isAddingAnimal"
                                    placeholder="Entrez vos notes ici..."></textarea>
                            </div>
                        </div>

                        <div class="d-flex flex-row gap-2 w-100 pt-2">
                            <button class="btn bouton-voir-plus  flex-grow-1 ">Modifier</button>
                            <button class="btn bouton-voir-plus flex-grow-1 " type="submit">Sauvegarder</button>
                            <button class="btn bouton-voir-plus  flex-grow-1 ">Supprimer</button>
                        </div>


                    </div>
                  </form>




                </div>
            </div>
        </div>
    </div>


    <!-- Section rendez-vous -->
    <div class="row ">
        <h3 class="border-bottom w-50">Ajout/Visualisation d'évènements</h3>
        <div class="bg-primary shadow-sm rounded-2 w-100">
            <div class="row justify-content-center p-4">
                <!-- Section ajout de rendez-vous -->
                <div class="col-sm bg-white rounded-2 shadow-sm p-4 d-flex me-5" style="min-height: 200px;">
                    <div class="d-flex flex-column justify-content-center gap-3 w-100">
                        <div class="row gap-3">
                            <!-- Colonne pour les champs 'Animal concerné' et 'Date et heure' -->
                            <div class="col">
                                <div class="d-flex flex-column gap-3">
                                    <div class="row align-items-center">
                                        <label for="animal-concerne"
                                            class="col-sm-4 col-form-label fw-semibold text-black text-nowrap">Animal:</label>
                                        <div class="col-sm-8">
                                            <input type="text" id="animal-concerne" class="form-control"
                                                placeholder="Animal concerné">
                                        </div>
                                    </div>

                                    <div class="row align-items-center">
                                        <label for="date-heure"
                                            class="col-sm-4 col-form-label fw-semibold text-black text-nowrap">Date et
                                            heure:</label>
                                        <div class="col-sm-8">
                                            <input type="datetime-local" id="date-heure" class="form-control"
                                                placeholder="Date et heure du rendez-vous">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Colonne pour les champs 'Type' et 'Lieu' -->
                            <div class="col">
                                <div class="d-flex flex-column gap-3">
                                    <div class="row align-items-center">
                                        <label for="type"
                                            class="col-sm-4 col-form-label fw-semibold text-black">Type:</label>
                                        <div class="col-sm-8">
                                            <input type="text" id="type" class="form-control"
                                                placeholder="Type de rendez-vous">
                                        </div>
                                    </div>

                                    <div class="row align-items-center">
                                        <label for="lieu"
                                            class="col-sm-4 col-form-label fw-semibold text-black">Lieu:</label>
                                        <div class="col-sm-8">
                                            <input type="text" id="lieu" class="form-control"
                                                placeholder="Lieu du rendez-vous">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Champ pour 'Notes' -->
                        <div class="d-flex flex-column gap-2">
                            <label for="notes" class="fw-semibold text-black">Notes:</label>
                            <textarea id="notes" class="form-control bg-light fixed-size-textarea" rows="3"
                                placeholder="Entrez la raison ici..."></textarea>
                        </div>

                        <button class="btn bouton-voir-plus flex-grow-1">Ajouter le rendez-vous</button>
                    </div>
                </div>

                <!-- Section affichage des rendez-vous -->
                <div class="col-sm bg-white rounded-2 shadow-sm p-4 ms-5" style="min-height: 200px;">

                    <h5 class="m-0">Rendez-vous de BB Jack:</h5>
                    <div class="h-100 w-100 rounded-2 p-4 d-flex flex-column gap-3">
                        <!-- Affichage évènement -->
                        <div class="bg-white rounded-2 shadow-sm d-flex align-items-center p-3 gap-2 w-100">
                            <!-- Colonne pour l'image -->
                            <div class="col-auto">
                                <img src="..\assets\images\horloge.png" width="40" height="auto" />
                            </div>

                            <!-- Colonne pour le texte -->
                            <div class="flex-grow-1 p-0 ">
                                <!-- Utilisez flex-grow-1 pour que cette div prenne l'espace restant -->
                                <p class="mb-1 fw-semi-bold">Rendez-vous au vétérinaire - 31 janvier 2024</p>
                            </div>

                            <!-- Colonne pour l'icône de suppression avec ms-auto pour pousser à droite -->
                            <div class="ms-auto">
                                <a href="">
                                    <img src="..\assets\images\supprimer.png" width="40" height="auto" />
                                </a>
                            </div>
                        </div>

                    </div>

                </div>
            </div>
        </div>
    </div>

</main>
